(this["webpackJsonpsine-labs"]=this["webpackJsonpsine-labs"]||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},176:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(0),c=n.n(r),o=n(12),s=n.n(o),i=(n(129),n(130),n(29)),u=n(106),l=n(37),p=n.n(l),j=n(63),b=n(25),f=n(50),d=n.n(f),O=n(213),h=n(224),g=n(223),m=n(105),x=n(221),v=n(15),y=n(222),w=n(38),S=(n(172),n(216)),k=Object(O.a)((function(e){return{option:{fontSize:15,"& > span":{marginRight:10,fontSize:18}},root:{flexGrow:1,marginTop:"30px"}}}));var P=function(){var e=k(),t=Object(r.useState)([]),n=Object(b.a)(t,2),o=n[0],s=n[1],l=Object(r.useState)({}),f=Object(b.a)(l,2),O=f[0],P=f[1],C=Object(r.useState)([]),D=Object(b.a)(C,2),T=D[0],F=D[1],I=Object(r.useState)({}),E=Object(b.a)(I,2),L=E[0],q=E[1],H=Object(r.useState)({}),J=Object(b.a)(H,2),M=J[0],N=J[1],z=Object(r.useState)(!1),B=Object(b.a)(z,2),_=B[0],A=B[1],G=Object(r.useState)(new Date),K=Object(b.a)(G,2),R=K[0],Y=K[1],Q=Object(r.useState)(!1),U=Object(b.a)(Q,2),V=U[0],W=U[1],X=Object(r.useState)(!1),Z=Object(b.a)(X,2),$=Z[0],ee=Z[1],te=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a,r,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=28;break}if(ee(!0),A(!1),W(!1),console.dir(t),(n=new Date(t.getTime())).setHours(n.getHours()+24),a=ne(t),r=ne(n),Y(t),console.log(t.getTime()),!O||!L){e.next=28;break}return e.prev=12,e.next=15,d()("https://api.openaq.org/v1/measurements?country=".concat(O.code,"&city=").concat(L.name,"&date_from=").concat(a,"&date_to=").concat(r));case 15:c=e.sent,ee(!1),A(!0),0==c.data.results.length?W(!0):W(!1),o=ce(c.data.results),A(!0),N(o),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(12),ee(!1),alert("Oops something went wrong, Please refresh and try again!!");case 28:case"end":return e.stop()}}),e,null,[[12,24]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(e){var t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+n+"-"+t};function ae(){return(ae=Object(j.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=19;break}return P(t),ee(!0),A(!1),W(!1),Y(new Date),e.prev=6,e.next=9,d()("https://api.openaq.org/v1/cities?country=".concat(t.code));case 9:n=e.sent,ee(!1),console.log(n),F(n.data.results),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),ee(!1),alert("Oops something went wrong, Please refresh and try again!!");case 19:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}function re(){return(re=Object(j.a)(p.a.mark((function e(t){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=23;break}return n=ne(new Date),ee(!0),A(!1),W(!1),Y(new Date),q(t),e.prev=7,e.next=10,d()("https://api.openaq.org/v1/measurements?country=".concat(O.code,"&city=").concat(t.name,"&date_from=").concat(n));case 10:a=e.sent,ee(!1),A(!0),0==a.data.results.length?W(!0):W(!1),r=ce(a.data.results),A(!0),N(r),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),ee(!1),alert("Oops something went wrong, Please refresh and try again!!");case 23:case"end":return e.stop()}}),e,null,[[7,19]])})))).apply(this,arguments)}function ce(e){var t={};return e.forEach((function(e){t[e.parameter]=t[e.parameter]?[].concat(Object(u.a)(t[e.parameter]),[e]):[e]})),console.log(t),t}return Object(r.useEffect)((function(){var e=localStorage.getItem("countries");if(ee(!0),W(!1),e){var t=JSON.parse(e);ee(!1),s(t)}d()("https://api.openaq.org/v1/countries").then((function(e){var t=e.data;ee(!1),console.log(t.results);var n=t.results.filter((function(e){return e.name}));console.log(n),localStorage.setItem("countries",JSON.stringify(n)),s(n)})).catch((function(e){ee(!1),alert("Oops something went wrong, Please refresh and try again!!")}))}),[]),Object(r.useEffect)((function(){}),[$,V]),Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)("p",{style:{fontSize:"40px",textAlign:"center"},children:"Pollution Data"}),Object(a.jsxs)(S.a,{container:!0,spacing:3,justify:"center",children:[o&&o.length>0&&Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(h.a,{id:"country-select-demo",style:{width:300},options:o,onChange:function(e,t){return function(e){return ae.apply(this,arguments)}(t)},classes:{option:e.option},autoHighlight:!0,getOptionLabel:function(e){return e.name},renderOption:function(e){return Object(a.jsx)(c.a.Fragment,{children:e.name})},renderInput:function(e){return e.inputProps.autoComplete="off",Object(a.jsx)(g.a,Object(i.a)(Object(i.a)({},e),{},{label:"Choose a country",variant:"outlined",inputProps:Object(i.a)(Object(i.a)({},e.inputProps),{},{autoComplete:"off"})}))}})}),T.length>0&&Object(a.jsx)(S.a,{item:!0,children:Object(a.jsx)(h.a,{id:"city-select-demo",style:{width:300},options:T,onChange:function(e,t){return function(e){return re.apply(this,arguments)}(t)},classes:{option:e.option},autoHighlight:!0,getOptionLabel:function(e){return e.name},renderOption:function(e){return Object(a.jsx)(c.a.Fragment,{children:e.name})},renderInput:function(e){return Object(a.jsx)(g.a,Object(i.a)(Object(i.a)({autoComplete:"off"},e),{},{label:"Choose a city",variant:"outlined",inputProps:Object(i.a)(Object(i.a)({},e.inputProps),{},{autoComplete:"off"})}))}})}),_&&Object(a.jsx)(S.a,{item:!0,container:!0,justify:"flex-end",children:Object(a.jsx)(v.a,{utils:m.a,children:Object(a.jsx)(y.a,{margin:"normal",id:"date-picker-dialog",label:"Date picker dialog",format:"MM/dd/yyyy",value:R,onChange:te,KeyboardButtonProps:{"aria-label":"change date"}})})})]}),Object(a.jsxs)(S.a,{container:!0,justify:"center",children:[_&&Object.keys(M).map((function(e){var t=[],n={};return M[e].forEach((function(e){var a=new Date(e.date.utc).getTime();if(!n[a]){var r={};r.x=new Date(e.date.utc).getTime(),r.y=e.value,t.push(r)}n[a]=a})),Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[M[e][0].parameter," Levels "]}),Object(a.jsxs)(w.e,{xType:"time",width:1300,height:300,children:[Object(a.jsx)(w.a,{}),Object(a.jsx)(w.c,{}),Object(a.jsx)(w.d,{title:"Time"}),Object(a.jsx)(w.f,{title:M[e][0].unit}),Object(a.jsx)(w.b,{data:t})]})]},e)})),V&&Object(a.jsx)("p",{children:"Didn't get data for this date. Try another"}),$&&Object(a.jsx)(x.a,{style:{marginTop:"30px"}})]})]})};var C=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(P,{})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,228)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),D()}},[[176,1,2]]]);
//# sourceMappingURL=main.c21957c0.chunk.js.map